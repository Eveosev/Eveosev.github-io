<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>How does tree model and Xgboost deal with missing values | Payne's Blog</title><meta name="description" content="How does tree model and Xgboost deal with missing values"><meta name="keywords" content="Tree model, Xgboost, Missing value"><meta name="author" content="Payne Wu"><meta name="copyright" content="Payne Wu"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="canonical" href="https://github.com/Eveosev/Eveosev.github-io.git/2020/01/14/How-does-tree-model-and-Xgboost-deal-with-missing-values/"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="How does tree model and Xgboost deal with missing values"><meta name="twitter:description" content="How does tree model and Xgboost deal with missing values"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/Photo/avatar.png"><meta property="og:type" content="article"><meta property="og:title" content="How does tree model and Xgboost deal with missing values"><meta property="og:url" content="https://github.com/Eveosev/Eveosev.github-io.git/2020/01/14/How-does-tree-model-and-Xgboost-deal-with-missing-values/"><meta property="og:site_name" content="Payne's Blog"><meta property="og:description" content="How does tree model and Xgboost deal with missing values"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/Photo/avatar.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="next" title="Ch2_Foundation_of_Language_models" href="https://github.com/Eveosev/Eveosev.github-io.git/2019/09/13/Ch2-Foundation-of-Language-models/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight_copy: 'true',
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  bookmark: {
    title: 'Bookmark',
    message_prev: 'Press',
    message_next: 'to bookmark this page'
  },
  runtime_unit: 'days'

  
}</script><link rel="stylesheet" href="/css/prism-duotone-dark.css" type="text/css"></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#introduction"><span class="toc-number">1.</span> <span class="toc-text"> Introduction</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#methodologies"><span class="toc-number">2.</span> <span class="toc-text"> Methodologies</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#random-forests-classification-description-breiman-leo"><span class="toc-number">2.1.</span> <span class="toc-text"> Random forests - classification description (Breiman Leo)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#missing-value-replacement-for-the-training-set"><span class="toc-number">2.1.1.</span> <span class="toc-text"> Missing value replacement for the training set</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#missing-value-replacement-for-the-test-set"><span class="toc-number">2.1.2.</span> <span class="toc-text"> Missing value replacement for the test set</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#bibliographies"><span class="toc-number">3.</span> <span class="toc-text"> Bibliographies:</span></a></li></ol></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/Photo/post.png)"><div id="page-header"><span class="pull-left"> <a class="blog_title" id="site-name" href="/">Payne's Blog</a></span><div class="open toggle-menu pull-right"><div class="menu-icon-first"></div><div class="menu-icon-second"></div><div class="menu-icon-third"></div></div><div class="menu_mask"></div><span class="pull-right menus"><div class="mobile_author_icon"><img class="lozad" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/Photo/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'"></div><div class="mobile_post_data"><div class="mobile_data_item text-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">9</div></a></div></div><div class="mobile_data_item text-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">Tags</div><div class="length_num">9</div></a></div></div></div><hr><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a><script>document.body.addEventListener('touchstart', function(){ });</script></div></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title"><div class="posttitle">How does tree model and Xgboost deal with missing values</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> Created 2020-01-14<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> Updated 2020-01-15</time><div class="post-meta-wordcount"><span>Word count: </span><span class="word-count">446</span><span class="post-meta__separator">|</span><span>Reading time: 2 min</span><span class="post-meta__separator">|</span><span>Post View: </span><span id="busuanzi_value_page_pv"></span></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h1 id="introduction"><a class="markdownIt-Anchor" href="#introduction"></a> Introduction</h1>
<p>In this case, I am going to talk about missing values. Specifically, we will cover the content of how the tree model and Xgboost deal with missing values. When we learn and practive machine learning algorithm, Sklearn and other ML packages are important tools for beginners. As is known to all, missing values are acceptable in tree model. But in fact, training a tree model in Sklearn might raise an error.</p>
<h1 id="methodologies"><a class="markdownIt-Anchor" href="#methodologies"></a> Methodologies</h1>
<h2 id="random-forests-classification-description-breiman-leo"><a class="markdownIt-Anchor" href="#random-forests-classification-description-breiman-leo"></a> Random forests - classification description (Breiman Leo)</h2>
<h3 id="missing-value-replacement-for-the-training-set"><a class="markdownIt-Anchor" href="#missing-value-replacement-for-the-training-set"></a> Missing value replacement for the training set</h3>
<p>Random forests has two ways of replacing missing values.</p>
<p><strong>The first way</strong> is fast. If the mth variable is not categorical, the method computes the median of all values of this variable in class j, then it uses this value to replace all missing values of the mth variable in class j. If the mth variable is categorical, the replacement is the most frequent non-missing value in class j. These replacement values are called fills.</p>
<p>Key word: median, mode</p>
<p><strong>The second way</strong> of replacing missing values is computationally more expensive but has given better performance than the first, even with large amounts of missing data. It replaces missing values only in the training set. It begins by doing a rough and inaccurate filling in of the missing values. Then it does a forest run and computes proximities.</p>
<p>If x(m,n) is a missing continuous value, estimate its fill as an average over the non-missing values of the mth variables weighted by the proximities between the nth case and the non-missing value case. If it is a missing categorical variable, replace it by the most frequent non-missing value where frequency is weighted by proximity.</p>
<p>Now iterate-construct a forest again using these newly filled in values, find new fills and iterate again. Our experience is that 4-6 iterations are enough.</p>
<h3 id="missing-value-replacement-for-the-test-set"><a class="markdownIt-Anchor" href="#missing-value-replacement-for-the-test-set"></a> Missing value replacement for the test set</h3>
<p>When there is a test set, there are two different methods of replacement depending on whether labels exist for the test set.</p>
<p>If they do, then the fills derived from the training set are used as replacements. If labels no not exist, then each case in the test set is replicated nclass times (nclass = number of classes). The first replicate of a case is assumed to be class 1 and the class one fills used to replace missing values. The 2nd replicate is assumed class 2 and the class 2 fills used on it.</p>
<p>This augmented test set is run down the tree. In each set of replicates, the one receiving the most votes determines the class of the original case.</p>
<h1 id="bibliographies"><a class="markdownIt-Anchor" href="#bibliographies"></a> Bibliographies:</h1>
<p><a href="https://www.stat.berkeley.edu/~breiman/RandomForests/cc_home.htm#missing1" target="_blank" rel="noopener">Breiman, L., <em>Random forests - classification description</em>)</a></p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Payne Wu</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://github.com/Eveosev/Eveosev.github-io.git/2020/01/14/How-does-tree-model-and-Xgboost-deal-with-missing-values/">https://github.com/Eveosev/Eveosev.github-io.git/2020/01/14/How-does-tree-model-and-Xgboost-deal-with-missing-values/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Tree-model-Xgboost-Missing-value/">Tree model, Xgboost, Missing value    </a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/Photo/avatar.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-buttom"><i class="fa fa-qrcode"></i> Donate<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lozad post-qr-code__img" src="/img/wechat.jpg"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lozad post-qr-code__img" src="/img/alipay.jpg"><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="next-post pull-full"><a href="/2019/09/13/Ch2-Foundation-of-Language-models/"><img class="next_cover lozad" data-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">Next Post</div><div class="next_info"><span>Ch2_Foundation_of_Language_models</span></div></a></div></nav><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> Comment</span></div><div id="disqus_thread"></div><script>var unused = null;
var disqus_config = function () {
  this.page.url = 'https://github.com/Eveosev/Eveosev.github-io.git/2020/01/14/How-does-tree-model-and-Xgboost-deal-with-missing-values/';
  this.page.identifier = '2020/01/14/How-does-tree-model-and-Xgboost-deal-with-missing-values/';
  this.page.title = 'How does tree model and Xgboost deal with missing values';
}
var d = document, s = d.createElement('script');
s.src = "https://" + 'payne-wu' +".disqus.com/embed.js";
s.setAttribute('data-timestamp', '' + +new Date());
(d.head || d.body).appendChild(s);</script></div></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2018 - 2020 By Payne Wu</div><div class="framework-info"><span>Driven </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme </span><a href="https://github.com/jerryc127/hexo-theme-butterfly"><span>Butterfly</span></a></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><section class="rightside" id="rightside"><a id="to_comment" href="#post-comment"><i class="scroll_to_comment fa fa-comments"></i></a><i class="fa fa-book" id="readmode" title="Read Mode"> </i><i class="fa fa-plus" id="font_plus" title="Increase font size"></i><i class="fa fa-minus" id="font_minus" title="Decrease font size"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="Traditional Chinese and Simplified Chinese Conversion">繁</a><i class="fa fa-moon-o nightshift" id="nightshift" title="Dark Mode"></i></section><div id="post_bottom"><div id="post_bottom_items"><a id="mobile_to_comment" href="#post-comment"><i class="mobile_scroll_to_comment fa fa-comments"></i></a><i class="fa fa-list" id="mobile_toc"></i><div id="toc_mobile"><div class="toc_mobile_headline">Catalog</div><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#introduction"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text"> Introduction</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#methodologies"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text"> Methodologies</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#random-forests-classification-description-breiman-leo"><span class="toc_mobile_items-number">2.1.</span> <span class="toc_mobile_items-text"> Random forests - classification description (Breiman Leo)</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#missing-value-replacement-for-the-training-set"><span class="toc_mobile_items-number">2.1.1.</span> <span class="toc_mobile_items-text"> Missing value replacement for the training set</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#missing-value-replacement-for-the-test-set"><span class="toc_mobile_items-number">2.1.2.</span> <span class="toc_mobile_items-text"> Missing value replacement for the test set</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#bibliographies"><span class="toc_mobile_items-number">3.</span> <span class="toc_mobile_items-text"> Bibliographies:</span></a></li></ol></div></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css"><script>$(function () {
  $('span.katex-display').wrap('<div class="katex-wrap"></div>')
})</script><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="/js/third-party/fireworks.js"></script><script src="/js/nightshift.js"></script><script id="ribbon" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/js/piao.js"></script><script src="/js/activate-power-mode.js"></script><script>POWERMODE.colorful = true; // make power mode colorful
POWERMODE.shake = true; // turn off shake
document.body.addEventListener('input', POWERMODE);
</script><script src="/js/tw_cn.js"></script><script>translateInitilization()

</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@1.2.2/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script><script>const observer = lozad(); // lazy loads elements with default selector as '.lozad'
observer.observe();</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"position":"left","width":150,"height":300,"vOffset":-20,"hOffset":20},"mobile":{"show":true,"scale":0.5},"log":false});</script></body></html>